<div class="content-section active">
  <div class="content-header">
    <h2 class="content-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ LAN</h2>
    <p class="content-description">
      –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–π –∫ –ø–æ—Ä—Ç—É LAN –≤–∞—à–µ–π —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞. –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ IP-–∞–¥—Ä–µ—Å–∞, –º–∞—Å–∫–∏ –ø–æ–¥—Å–µ—Ç–∏, DHCP –∏ —Ç.–¥.
    </p>
  </div>

  <!-- IP-–∞–¥—Ä–µ—Å -->
  <div class="form-row">
    <div class="form-label">IP-–∞–¥—Ä–µ—Å:</div>
    <div class="form-field">
      <div class="field-with-hint">
        <input type="text" class="form-control" id="ipAddress" value="192.168.1.1" placeholder="xxx.xxx.xxx.xxx">
        <span class="hint">–û—Å–Ω–æ–≤–Ω–æ–π IP —Ä–æ—É—Ç–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏</span>
      </div>
    </div>
  </div>

  <!-- –ú–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ -->
  <div class="form-row">
    <div class="form-label">–ú–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏:</div>
    <div class="form-field">
      <div class="field-with-hint">
        <input type="text" class="form-control" id="subnetMask" value="255.255.255.0" placeholder="xxx.xxx.xxx.xxx">
        <span class="hint">–û–±—ã—á–Ω–æ 255.255.255.0</span>
      </div>
    </div>
  </div>

  <!-- DHCP -->
  <div class="form-row">
    <div class="form-label">DHCP-—Å–µ—Ä–≤–µ—Ä:</div>
    <div class="form-field">
      <select class="form-control" id="dhcpMode">
        <option value="enabled" selected>–í–∫–ª—é—á–µ–Ω–æ</option>
        <option value="disabled">–û—Ç–∫–ª—é—á–µ–Ω–æ</option>
        <option value="relay">DHCP Relay</option>
      </select>
      <div class="field-hint" style="margin-top: 6px; color: #666; font-size: 13px;">
        –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–¥–∞—á–∞ IP-–∞–¥—Ä–µ—Å–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –≤ —Å–µ—Ç–∏
      </div>
    </div>
  </div>

  <!-- –î–∏–∞–ø–∞–∑–æ–Ω IP-–∞–¥—Ä–µ—Å–æ–≤ DHCP-–∫–ª–∏–µ–Ω—Ç–∞ -->
  <div class="form-row dhcp-field">
    <div class="form-label">–î–∏–∞–ø–∞–∑–æ–Ω IP-–∞–¥—Ä–µ—Å–æ–≤:</div>
    <div class="form-field">
      <div class="ip-range">
        <input type="text" class="form-control" id="dhcpStart" value="192.168.1.100" placeholder="–ù–∞—á–∞–ª–æ">
        <span class="range-separator">‚Äî</span>
        <input type="text" class="form-control" id="dhcpEnd" value="192.168.1.200" placeholder="–ö–æ–Ω–µ—Ü">
      </div>
      <div class="field-hint" style="margin-top: 6px; color: #666; font-size: 13px;">
        –î–∏–∞–ø–∞–∑–æ–Ω IP-–∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–¥–∞—á–∏ –∫–ª–∏–µ–Ω—Ç–∞–º
      </div>
    </div>
  </div>

  <!-- –í—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã DHCP -->
  <div class="form-row dhcp-field">
    <div class="form-label">–í—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã DHCP:</div>
    <div class="form-field">
      <div class="field-with-hint">
        <input type="number" class="form-control" id="dhcpLease" value="480" min="1" max="10080" style="width: 120px;">
        <span class="hint">–º–∏–Ω—É—Ç</span>
        <span style="color:#666; margin-left: 4px;">(1 ‚Äì 10080 –º–∏–Ω—É—Ç)</span>
      </div>
    </div>
  </div>

  <!-- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π DHCP (—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ) -->
  <div class="form-row">
    <div class="form-label">–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π DHCP:</div>
    <div class="form-field">
      <div class="button-group" style="margin-bottom: 12px;">
        <button class="btn btn-secondary btn-sm" id="showDhcpClients">
          <span>üìã</span> –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
        </button>
        <button class="btn btn-secondary btn-sm" id="addStaticDhcpBtn">
          <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
        </button>
      </div>
      
      <!-- –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π -->
      <div class="table-container" id="staticDhcpTable" style="margin-top: 16px;">
        <table class="data-table">
          <thead>
            <tr>
              <th>MAC-–∞–¥—Ä–µ—Å</th>
              <th>IP-–∞–¥—Ä–µ—Å</th>
              <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
              <th style="width: 60px;"></th>
            </tr>
          </thead>
          <tbody id="staticDhcpList">
            <tr>
              <td><code>00:11:22:33:44:55</code></td>
              <td>192.168.1.50</td>
              <td>–ü—Ä–∏–Ω—Ç–µ—Ä</td>
              <td>
                <button class="btn btn-warning btn-sm" data-id="1">‚úï</button>
              </td>
            </tr>
            <tr>
              <td><code>aa:bb:cc:dd:ee:ff</code></td>
              <td>192.168.1.51</td>
              <td>–°–µ—Ä–≤–µ—Ä</td>
              <td>
                <button class="btn btn-warning btn-sm" data-id="2">‚úï</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- –ò–º—è –¥–æ–º–µ–Ω–∞ -->
  <div class="form-row">
    <div class="form-label">–ò–º—è –¥–æ–º–µ–Ω–∞:</div>
    <div class="form-field">
      <div class="field-with-hint">
        <input type="text" class="form-control" id="domainName" value="local" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: home.lan">
        <span class="hint">DNS-—Å—É—Ñ—Ñ–∏–∫—Å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏</span>
      </div>
    </div>
  </div>

  <!-- DNS-—Å–µ—Ä–≤–µ—Ä—ã -->
  <div class="form-row">
    <div class="form-label">DNS-—Å–µ—Ä–≤–µ—Ä—ã:</div>
    <div class="form-field">
      <div class="dns-servers">
        <input type="text" class="form-control" id="dns1" value="8.8.8.8" placeholder="–û—Å–Ω–æ–≤–Ω–æ–π DNS" style="margin-bottom: 8px;">
        <input type="text" class="form-control" id="dns2" value="8.8.4.4" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π DNS">
      </div>
      <div class="field-hint" style="margin-top: 6px; color: #666; font-size: 13px;">
        –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–æ 2 DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤
      </div>
    </div>
  </div>

  <!-- 802.1X Spoofing Type -->
  <div class="form-row">
    <div class="form-label">802.1X Spoofing:</div>
    <div class="form-field">
      <select class="form-control" id="spoofingType">
        <option value="auto" selected>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</option>
        <option value="manual">–†—É—á–Ω–æ–π</option>
        <option value="disabled">–û—Ç–∫–ª—é—á–µ–Ω–æ</option>
      </select>
    </div>
  </div>

  <!-- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å MAC-–∞–¥—Ä–µ—Å -->
  <div class="form-row">
    <div class="form-label">–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å MAC-–∞–¥—Ä–µ—Å:</div>
    <div class="form-field">
      <div class="field-with-button">
        <input type="text" class="form-control" id="macClone" value="00:00:00:00:00:00" placeholder="xx:xx:xx:xx:xx:xx">
        <button class="btn btn-secondary btn-sm" id="cloneCurrentMac">
          <span>üîÑ</span> –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π
        </button>
      </div>
      <div class="field-hint" style="margin-top: 6px; color: #666; font-size: 13px;">
        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–º–µ–Ω—ã MAC-–∞–¥—Ä–µ—Å–∞ LAN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      </div>
    </div>
  </div>

  <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ -->
  <div class="advanced-section" style="margin-top: 30px;">
    <h3 style="color: #004466; font-size: 16px; margin-bottom: 16px;">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
    
    <div class="form-row">
      <div class="form-label">MTU:</div>
      <div class="form-field">
        <div class="field-with-hint">
          <input type="number" class="form-control" id="mtu" value="1500" min="576" max="1500" style="width: 120px;">
          <span class="hint">–±–∞–π—Ç</span>
          <span style="color:#666; margin-left: 4px;">(576‚Äì1500)</span>
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-label">IGMP Snooping:</div>
      <div class="form-field">
        <label class="checkbox-label">
          <input type="checkbox" id="igmpSnooping" checked>
          <span>–í–∫–ª—é—á–µ–Ω–æ</span>
        </label>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-label">UPnP:</div>
      <div class="form-field">
        <label class="checkbox-label">
          <input type="checkbox" id="upnp" checked>
          <span>–í–∫–ª—é—á–∏—Ç—å Universal Plug and Play</span>
        </label>
      </div>
    </div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É -->
  <div class="form-row" style="margin-top: 30px;">
    <div class="form-label"></div>
    <div class="form-field">
      <div class="button-group">
        <button class="btn btn-secondary" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn btn-primary" id="applyBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
        <button class="btn btn-danger" id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
      </div>
    </div>
  </div>
</div>

<style>
  /* –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ */
  * {
    box-sizing: border-box;
  }

  .content-section {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  .content-header {
    margin-bottom: 24px;
  }

  .content-title {
    font-size: 20px;
    color: #004466;
    margin: 0 0 8px 0;
    font-weight: 600;
  }

  .content-description {
    font-size: 14px;
    color: #555;
    line-height: 1.5;
    margin: 0;
    padding-bottom: 16px;
    border-bottom: 1px solid #e0e8f0;
  }

  .form-row {
    display: flex;
    align-items: flex-start;
    margin-bottom: 20px;
    padding: 4px 0;
  }

  .form-label {
    width: 220px;
    font-weight: 600;
    color: #004466;
    font-size: 14px;
    padding-top: 8px;
    flex-shrink: 0;
  }

  .form-field {
    flex: 1;
    max-width: 600px;
  }

  .form-control {
    padding: 8px 12px;
    border: 1px solid #b0c0d0;
    border-radius: 6px;
    font-size: 14px;
    background: #fff;
    transition: border-color 0.2s, box-shadow 0.2s;
    height: 38px;
    width: 100%;
  }

  .form-control:focus {
    border-color: #006699;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0,102,153,0.1);
  }

  .form-control::placeholder {
    color: #99a8b9;
    font-style: italic;
  }

  input[type="number"].form-control {
    -moz-appearance: textfield;
  }

  input[type="number"].form-control::-webkit-outer-spin-button,
  input[type="number"].form-control::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  select.form-control {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23555' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    padding-right: 32px;
    appearance: none;
  }

  .field-with-hint {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  .field-with-button {
    display: flex;
    gap: 12px;
    align-items: center;
    flex-wrap: wrap;
  }

  .hint {
    font-size: 13px;
    color: #666;
    background: #f5f7fa;
    padding: 4px 10px;
    border-radius: 16px;
    border: 1px solid #e0e8f0;
    white-space: nowrap;
  }

  .ip-range {
    display: flex;
    gap: 12px;
    align-items: center;
  }

  .range-separator {
    color: #666;
    font-weight: 500;
    font-size: 16px;
  }

  .dns-servers {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .checkbox-label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #333;
    cursor: pointer;
    user-select: none;
    background: #f8fafc;
    padding: 8px 16px;
    border-radius: 6px;
    border: 1px solid #e0e8f0;
  }

  .checkbox-label input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin: 0;
    cursor: pointer;
  }

  .button-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 8px 20px;
    border: 1px solid transparent;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    height: 38px;
    white-space: nowrap;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }

  .btn-sm {
    padding: 4px 12px;
    height: 32px;
    font-size: 13px;
  }

  .btn-secondary {
    background: #f0f4f8;
    border-color: #b0c0d0;
    color: #004466;
  }

  .btn-secondary:hover {
    background: #e4eaf2;
    border-color: #90a0b8;
  }

  .btn-primary {
    background: #006699;
    border-color: #004466;
    color: white;
  }

  .btn-primary:hover {
    background: #004466;
  }

  .btn-danger {
    background: #f8f0f0;
    border-color: #d0b0b0;
    color: #993333;
  }

  .btn-danger:hover {
    background: #f0e0e0;
    border-color: #b09090;
  }

  .btn-warning {
    background: #fff3e0;
    border-color: #ffb366;
    color: #994d00;
  }

  .btn-warning:hover {
    background: #ffe0b3;
    border-color: #ff9933;
  }

  /* –¢–∞–±–ª–∏—Ü–∞ */
  .table-container {
    border: 1px solid #e0e8f0;
    border-radius: 8px;
    overflow: hidden;
    background: #fff;
  }

  .data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
  }

  .data-table th {
    background: #f0f7fc;
    color: #004466;
    padding: 10px 12px;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid #d0e0f0;
  }

  .data-table td {
    padding: 10px 12px;
    border-bottom: 1px solid #e0e8f0;
  }

  .data-table tr:last-child td {
    border-bottom: none;
  }

  .data-table tr:hover {
    background: #f8fbff;
  }

  .data-table code {
    background: #f0f4f8;
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
  }

  /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
  @media (max-width: 768px) {
    .form-row {
      flex-direction: column;
      align-items: stretch;
    }

    .form-label {
      width: 100%;
      margin-bottom: 4px;
    }

    .field-with-hint,
    .field-with-button,
    .ip-range {
      flex-direction: column;
      align-items: stretch;
    }

    .range-separator {
      align-self: center;
    }

    .hint {
      white-space: normal;
      text-align: center;
    }

    .button-group {
      flex-direction: column;
    }

    .btn {
      width: 100%;
    }

    .data-table {
      font-size: 13px;
    }

    .data-table th,
    .data-table td {
      padding: 8px 10px;
    }
  }

  /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
  .notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #d4edda;
    color: #155724;
    padding: 12px 24px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 10000;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 500;
    animation: slideIn 0.3s ease;
  }

  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
</style>

<script>
(function() {
  // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
  const saveBtn = document.getElementById('saveBtn');
  const applyBtn = document.getElementById('applyBtn');
  const resetBtn = document.getElementById('resetBtn');
  const dhcpMode = document.getElementById('dhcpMode');
  const showDhcpClients = document.getElementById('showDhcpClients');
  const addStaticDhcpBtn = document.getElementById('addStaticDhcpBtn'); // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ
  const cloneCurrentMac = document.getElementById('cloneCurrentMac');
  
  // –ü–æ–ª—è —Ñ–æ—Ä–º—ã
  const ipAddress = document.getElementById('ipAddress');
  const subnetMask = document.getElementById('subnetMask');
  const dhcpStart = document.getElementById('dhcpStart');
  const dhcpEnd = document.getElementById('dhcpEnd');
  const dhcpLease = document.getElementById('dhcpLease');
  const domainName = document.getElementById('domainName');
  const dns1 = document.getElementById('dns1');
  const dns2 = document.getElementById('dns2');
  const spoofingType = document.getElementById('spoofingType');
  const macClone = document.getElementById('macClone');
  const mtu = document.getElementById('mtu');
  const igmpSnooping = document.getElementById('igmpSnooping');
  const upnp = document.getElementById('upnp');

  // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  const showNotification = (message, isError = false) => {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.style.background = isError ? '#f8d7da' : '#d4edda';
    notification.style.color = isError ? '#721c24' : '#155724';
    notification.innerHTML = `
      <span>${isError ? '‚úï' : '‚úì'}</span>
      <span>${message}</span>
    `;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.opacity = '0';
      notification.style.transform = 'translateX(100%)';
      setTimeout(() => {
        if (notification.parentNode) {
          notification.remove();
        }
      }, 300);
    }, 3000);
  };

  // –í–∞–ª–∏–¥–∞—Ü–∏—è IP-–∞–¥—Ä–µ—Å–∞
  const isValidIP = (ip) => {
    const ipRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
    return ipRegex.test(ip);
  };

  // –í–∞–ª–∏–¥–∞—Ü–∏—è MAC-–∞–¥—Ä–µ—Å–∞
  const isValidMAC = (mac) => {
    const macRegex = /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/;
    return macRegex.test(mac);
  };

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MAC-–∞–¥—Ä–µ—Å–∞
  const formatMAC = (mac) => {
    const clean = mac.replace(/[^0-9A-Fa-f]/g, '').toUpperCase();
    if (clean.length === 12) {
      return clean.match(/.{2}/g).join(':');
    }
    return mac;
  };

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–µ–π DHCP –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
  const toggleDhcpFields = () => {
    const dhcpFields = document.querySelectorAll('.dhcp-field');
    const isEnabled = dhcpMode?.value === 'enabled';
    
    dhcpFields.forEach(field => {
      field.style.display = isEnabled ? 'flex' : 'none';
    });
  };

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  const saveSettings = (apply = false) => {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è IP-–∞–¥—Ä–µ—Å–∞
    if (!isValidIP(ipAddress.value)) {
      showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç IP-–∞–¥—Ä–µ—Å–∞', true);
      ipAddress.focus();
      return;
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞—Å–∫–∏ –ø–æ–¥—Å–µ—Ç–∏
    if (!isValidIP(subnetMask.value)) {
      showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –º–∞—Å–∫–∏ –ø–æ–¥—Å–µ—Ç–∏', true);
      subnetMask.focus();
      return;
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ DHCP
    if (dhcpMode.value === 'enabled') {
      if (!isValidIP(dhcpStart.value) || !isValidIP(dhcpEnd.value)) {
        showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç IP-–∞–¥—Ä–µ—Å–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ DHCP', true);
        return;
      }
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è MAC-–∞–¥—Ä–µ—Å–∞ (–µ—Å–ª–∏ –Ω–µ –≤—Å–µ –Ω—É–ª–∏)
    if (macClone.value !== '00:00:00:00:00:00' && !isValidMAC(macClone.value)) {
      showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç MAC-–∞–¥—Ä–µ—Å–∞', true);
      macClone.focus();
      return;
    }

    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    const settings = {
      ipAddress: ipAddress.value,
      subnetMask: subnetMask.value,
      dhcpMode: dhcpMode.value,
      dhcpRange: {
        start: dhcpStart.value,
        end: dhcpEnd.value
      },
      dhcpLease: parseInt(dhcpLease.value) || 480,
      domainName: domainName.value,
      dnsServers: {
        primary: dns1.value,
        secondary: dns2.value
      },
      spoofingType: spoofingType.value,
      macClone: macClone.value,
      mtu: parseInt(mtu.value) || 1500,
      igmpSnooping: igmpSnooping.checked,
      upnp: upnp.checked
    };

    console.log('LAN –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', settings);
    
    const message = apply ? '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ LAN –ø—Ä–∏–º–µ–Ω–µ–Ω—ã' : '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ LAN —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã';
    showNotification(message);
  };

  // –°–±—Ä–æ—Å –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  const resetSettings = () => {
    ipAddress.value = '192.168.1.1';
    subnetMask.value = '255.255.255.0';
    dhcpMode.value = 'enabled';
    dhcpStart.value = '192.168.1.100';
    dhcpEnd.value = '192.168.1.200';
    dhcpLease.value = '480';
    domainName.value = 'local';
    dns1.value = '8.8.8.8';
    dns2.value = '8.8.4.4';
    spoofingType.value = 'auto';
    macClone.value = '00:00:00:00:00:00';
    mtu.value = '1500';
    igmpSnooping.checked = true;
    upnp.checked = true;
    
    toggleDhcpFields();
    showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –∑–∞–≤–æ–¥—Å–∫–∏–º');
  };

  // –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ MAC-–∞–¥—Ä–µ—Å–∞
  const cloneMac = () => {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ API
    const fakeMac = '00:1A:2B:3C:4D:5E';
    macClone.value = fakeMac;
    showNotification('MAC-–∞–¥—Ä–µ—Å —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω');
  };

  // –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã—Ö DHCP-–∫–ª–∏–µ–Ω—Ç–æ–≤
  const showClients = () => {
    const clients = [
      { mac: '00:11:22:33:44:55', ip: '192.168.1.101', name: 'Laptop-Ivan', lease: '23:59' },
      { mac: 'aa:bb:cc:dd:ee:ff', ip: '192.168.1.102', name: 'Phone-Android', lease: '23:45' },
      { mac: '11:22:33:44:55:66', ip: '192.168.1.103', name: 'SmartTV', lease: '24:00' }
    ];

    let message = '–ê–∫—Ç–∏–≤–Ω—ã–µ DHCP-–∫–ª–∏–µ–Ω—Ç—ã:\n';
    clients.forEach(c => {
      message += `\n${c.ip} - ${c.mac} (${c.name})`;
    });
    
    alert(message);
  };

  // –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ DHCP-—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
  const addStaticDhcpHandler = () => {  // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ —Å addStaticDhcp –Ω–∞ addStaticDhcpHandler
    const mac = prompt('–í–≤–µ–¥–∏—Ç–µ MAC-–∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (xx:xx:xx:xx:xx:xx):');
    if (!mac) return;
    
    if (!isValidMAC(mac)) {
      showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç MAC-–∞–¥—Ä–µ—Å–∞', true);
      return;
    }

    const ip = prompt('–í–≤–µ–¥–∏—Ç–µ IP-–∞–¥—Ä–µ—Å –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è:');
    if (!ip) return;
    
    if (!isValidIP(ip)) {
      showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç IP-–∞–¥—Ä–µ—Å–∞', true);
      return;
    }

    const desc = prompt('–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):');
    
    showNotification(`–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ: ${ip} ‚Üí ${mac}`);
  };

  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ IP-–∞–¥—Ä–µ—Å–∞
  const validateIPInput = (input) => {
    input.addEventListener('input', function() {
      this.value = this.value.replace(/[^0-9.]/g, '');
      // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∫—Ç–µ—Ç–æ–≤
      const parts = this.value.split('.');
      if (parts.length > 4) {
        this.value = parts.slice(0, 4).join('.');
      }
    });
  };

  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ MAC-–∞–¥—Ä–µ—Å–∞
  const validateMACInput = (input) => {
    input.addEventListener('input', function() {
      let value = this.value.replace(/[^0-9A-Fa-f]/g, '').toUpperCase();
      if (value.length > 12) value = value.slice(0, 12);
      
      const parts = [];
      for (let i = 0; i < value.length; i += 2) {
        parts.push(value.substr(i, 2));
      }
      
      this.value = parts.join(':');
    });
  };

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  validateIPInput(ipAddress);
  validateIPInput(subnetMask);
  validateIPInput(dhcpStart);
  validateIPInput(dhcpEnd);
  validateIPInput(dns1);
  validateIPInput(dns2);
  validateMACInput(macClone);

  // –í–∞–ª–∏–¥–∞—Ü–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π
  if (dhcpLease) {
    dhcpLease.addEventListener('input', function() {
      let value = parseInt(this.value);
      if (isNaN(value) || value < 1) this.value = 1;
      if (value > 10080) this.value = 10080;
    });
  }

  if (mtu) {
    mtu.addEventListener('input', function() {
      let value = parseInt(this.value);
      if (isNaN(value) || value < 576) this.value = 576;
      if (value > 1500) this.value = 1500;
    });
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  if (dhcpMode) {
    dhcpMode.addEventListener('change', toggleDhcpFields);
  }

  if (saveBtn) {
    saveBtn.addEventListener('click', (e) => {
      e.preventDefault();
      saveSettings(false);
    });
  }

  if (applyBtn) {
    applyBtn.addEventListener('click', (e) => {
      e.preventDefault();
      saveSettings(true);
    });
  }

  if (resetBtn) {
    resetBtn.addEventListener('click', (e) => {
      e.preventDefault();
      resetSettings();
    });
  }

  if (showDhcpClients) {
    showDhcpClients.addEventListener('click', showClients);
  }

  if (addStaticDhcpBtn) {
    addStaticDhcpBtn.addEventListener('click', addStaticDhcpHandler); // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
  }

  if (cloneCurrentMac) {
    cloneCurrentMac.addEventListener('click', cloneMac);
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  toggleDhcpFields();
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
  if (!document.getElementById('lan-animations')) {
    const style = document.createElement('style');
    style.id = 'lan-animations';
    style.textContent = `
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    `;
    document.head.appendChild(style);
  }
})();
</script>