<div class="content-section active">
  <div class="content-header">
    <h2 class="content-title">–ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π —Å–µ—Ç–∏ - wlan1</h2>
    <p class="content-description">
      –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ LAN, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –≤–∞—à–µ–π —Ç–æ—á–∫–µ –¥–æ—Å—Ç—É–ø–∞. –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ LAN.
    </p>
  </div>

  <!-- –û—Ç–∫–ª—é—á–∏—Ç—å –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å LAN -->
  <div class="form-row">
    <div class="form-label">–û—Ç–∫–ª—é—á–∏—Ç—å –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å LAN</div>
    <div class="form-field">
      <label class="checkbox-label">
        <input type="checkbox" id="disableWlan">
        <span>–û—Ç–∫–ª—é—á–∏—Ç—å</span>
      </label>
    </div>
  </div>

  <!-- –î–∏–∞–ø–∞–∑–æ–Ω -->
  <div class="form-row">
    <div class="form-label">–î–∏–∞–ø–∞–∑–æ–Ω</div>
    <div class="form-field">
      <select class="form-control" id="band">
        <option selected>2.4–ì–ì—Ü (B+G+N)</option>
        <option>2.4–ì–ì—Ü (B+G+N+AX)</option>
        <option>5–ì–ì—Ü (A+N+AC)</option>
        <option>5–ì–ì—Ü (A+N+AC+AX)</option>
      </select>
    </div>
  </div>

  <!-- –†–µ–∂–∏–º -->
  <div class="form-row">
    <div class="form-label">–†–µ–∂–∏–º</div>
    <div class="form-field">
      <select class="form-control" id="mode">
        <option selected>AP (—Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞)</option>
        <option>–ö–ª–∏–µ–Ω—Ç</option>
        <option>–ú–æ—Å—Ç</option>
        <option>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—å</option>
      </select>
    </div>
  </div>

  <!-- –¢–∏–ø —Å–µ—Ç–∏ -->
  <div class="form-row">
    <div class="form-label">–¢–∏–ø —Å–µ—Ç–∏</div>
    <div class="form-field">
      <select class="form-control" id="networkType">
        <option selected>–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞</option>
        <option>Ad-Hoc</option>
      </select>
    </div>
  </div>

  <!-- SSID -->
  <div class="form-row">
    <div class="form-label">SSID</div>
    <div class="form-field">
      <input type="text" class="form-control" id="ssid" value="XDM RUS-2.4G" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Å–µ—Ç–∏">
    </div>
  </div>

  <!-- –®–∏—Ä–∏–Ω–∞ –∫–∞–Ω–∞–ª–∞ -->
  <div class="form-row">
    <div class="form-label">–®–∏—Ä–∏–Ω–∞ –∫–∞–Ω–∞–ª–∞</div>
    <div class="form-field">
      <select class="form-control" id="channelWidth">
        <option selected>20MHz</option>
        <option>20/40MHz</option>
        <option>80MHz</option>
        <option>160MHz</option>
      </select>
    </div>
  </div>

  <!-- –ù–æ–º–µ—Ä –∫–∞–Ω–∞–ª–∞ -->
  <div class="form-row">
    <div class="form-label">–ù–æ–º–µ—Ä –∫–∞–Ω–∞–ª–∞</div>
    <div class="form-field">
      <div class="field-with-hint">
        <select class="form-control" id="channel" style="width: 120px;">
          <option selected>–ê–≤—Ç–æ</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10</option>
          <option>11</option>
          <option>12</option>
          <option>13</option>
        </select>
        <span class="hint">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 1, 6, 11</span>
      </div>
    </div>
  </div>

  <!-- –®–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π SSID -->
  <div class="form-row">
    <div class="form-label">–®–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π SSID</div>
    <div class="form-field">
      <select class="form-control" id="broadcastSsid">
        <option selected>–í–∫–ª—é—á–µ–Ω–æ</option>
        <option>–û—Ç–∫–ª—é—á–µ–Ω–æ</option>
      </select>
    </div>
  </div>

  <!-- WMM -->
  <div class="form-row">
    <div class="form-label">WMM (Wi-Fi Multimedia)</div>
    <div class="form-field">
      <select class="form-control" id="wmm">
        <option selected>–í–∫–ª—é—á–µ–Ω–æ</option>
        <option>–û—Ç–∫–ª—é—á–µ–Ω–æ</option>
      </select>
    </div>
  </div>

  <!-- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π -->
  <div class="form-row">
    <div class="form-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π</div>
    <div class="form-field">
      <div class="field-with-hint">
        <input type="number" class="form-control" id="maxClients" value="64" min="1" max="64" style="width: 100px;">
        <span class="hint">(1‚Äì64)</span>
      </div>
    </div>
  </div>

  <!-- –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö -->
  <div class="form-row">
    <div class="form-label">–°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö</div>
    <div class="form-field">
      <select class="form-control" id="dataRate">
        <option selected>–ê–≤—Ç–æ</option>
        <option>1 –ú–±–∏—Ç/—Å</option>
        <option>2 –ú–±–∏—Ç/—Å</option>
        <option>5.5 –ú–±–∏—Ç/—Å</option>
        <option>11 –ú–±–∏—Ç/—Å</option>
        <option>6 –ú–±–∏—Ç/—Å</option>
        <option>9 –ú–±–∏—Ç/—Å</option>
        <option>12 –ú–±–∏—Ç/—Å</option>
        <option>18 –ú–±–∏—Ç/—Å</option>
        <option>24 –ú–±–∏—Ç/—Å</option>
        <option>36 –ú–±–∏—Ç/—Å</option>
        <option>48 –ú–±–∏—Ç/—Å</option>
        <option>54 –ú–±–∏—Ç/—Å</option>
      </select>
    </div>
  </div>

  <!-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ TX -->
  <div class="form-row">
    <div class="form-label">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ TX (–ú–±–∏—Ç/—Å)</div>
    <div class="form-field">
      <div class="field-with-hint">
        <input type="number" class="form-control" id="txLimit" value="0" min="0" max="1000" style="width: 100px;">
        <span class="hint">(0 ‚Äî –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)</span>
      </div>
    </div>
  </div>

  <!-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ RX -->
  <div class="form-row">
    <div class="form-label">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ RX (–ú–±–∏—Ç/—Å)</div>
    <div class="form-field">
      <div class="field-with-hint">
        <input type="number" class="form-control" id="rxLimit" value="0" min="0" max="1000" style="width: 100px;">
        <span class="hint">(0 ‚Äî –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)</span>
      </div>
    </div>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã -->
  <div class="form-row">
    <div class="form-label">–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã</div>
    <div class="form-field">
      <button class="btn btn-secondary" id="showClientsBtn">
        <span>üë•</span> –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
      </button>
    </div>
  </div>

  <!-- –í–∫–ª—é—á–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—è -->
  <div class="form-row">
    <div class="form-label">–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—è</div>
    <div class="form-field">
      <label class="checkbox-label">
        <input type="checkbox" id="universalRepeater">
        <span>–í–∫–ª—é—á–∏—Ç—å (—Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∫–∞–∫ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –∫–ª–∏–µ–Ω—Ç)</span>
      </label>
    </div>
  </div>

  <!-- SSID —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–¥–ª—è —Ä–µ–∂–∏–º–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—è) -->
  <div class="form-row repeater-field" style="display: none;">
    <div class="form-label">SSID —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</div>
    <div class="form-field">
      <input type="text" class="form-control" id="extendedSsid" placeholder="–í–≤–µ–¥–∏—Ç–µ SSID —Å–µ—Ç–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è">
    </div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É -->
  <div class="form-row" style="margin-top: 30px;">
    <div class="form-label"></div>
    <div class="form-field">
      <div class="button-group">
        <button class="btn btn-secondary" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn btn-primary" id="saveApplyBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        <button class="btn btn-danger" id="cancelBtn">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  </div>
</div>

<style>
  /* –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ (–æ–±—â–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏) */
  * {
    box-sizing: border-box;
  }

  .content-section {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  .content-header {
    margin-bottom: 24px;
  }

  .content-title {
    font-size: 20px;
    color: #004466;
    margin: 0 0 8px 0;
    font-weight: 600;
  }

  .content-description {
    font-size: 14px;
    color: #555;
    line-height: 1.5;
    margin: 0;
    padding-bottom: 16px;
    border-bottom: 1px solid #e0e8f0;
  }

  .form-row {
    display: flex;
    align-items: flex-start;
    margin-bottom: 16px;
    padding: 4px 0;
  }

  .form-label {
    width: 250px;
    font-weight: 600;
    color: #004466;
    font-size: 14px;
    padding-top: 8px;
    flex-shrink: 0;
  }

  .form-field {
    flex: 1;
    max-width: 600px;
  }

  .form-control {
    padding: 8px 12px;
    border: 1px solid #b0c0d0;
    border-radius: 6px;
    font-size: 14px;
    background: #fff;
    transition: border-color 0.2s, box-shadow 0.2s;
    height: 38px;
  }

  .form-control:focus {
    border-color: #006699;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0,102,153,0.1);
  }

  .form-control::placeholder {
    color: #99a8b9;
    font-style: italic;
  }

  input[type="number"].form-control {
    -moz-appearance: textfield;
  }

  input[type="number"].form-control::-webkit-outer-spin-button,
  input[type="number"].form-control::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  select.form-control {
    min-width: 200px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23555' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    padding-right: 32px;
    appearance: none;
  }

  .checkbox-label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #333;
    cursor: pointer;
    user-select: none;
    background: #f8fafc;
    padding: 8px 16px;
    border-radius: 6px;
    border: 1px solid #e0e8f0;
  }

  .checkbox-label input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
    margin: 0;
  }

  .field-with-hint {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  .hint {
    font-size: 13px;
    color: #666;
    background: #f5f7fa;
    padding: 4px 10px;
    border-radius: 16px;
    border: 1px solid #e0e8f0;
    white-space: nowrap;
  }

  .button-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 8px 20px;
    border: 1px solid transparent;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    height: 38px;
    white-space: nowrap;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }

  .btn-secondary {
    background: #f0f4f8;
    border-color: #b0c0d0;
    color: #004466;
  }

  .btn-secondary:hover {
    background: #e4eaf2;
    border-color: #90a0b8;
  }

  .btn-primary {
    background: #006699;
    border-color: #004466;
    color: white;
  }

  .btn-primary:hover {
    background: #004466;
  }

  .btn-danger {
    background: #f8f0f0;
    border-color: #d0b0b0;
    color: #993333;
  }

  .btn-danger:hover {
    background: #f0e0e0;
    border-color: #b09090;
  }

  /* –¢–∞–±–ª–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ */
  .client-popup {
    margin-top: 20px;
    animation: fadeIn 0.3s ease;
  }

  .client-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
    background: #fff;
    border-radius: 6px;
    overflow: hidden;
  }

  .client-table th {
    background: #f0f7fc;
    color: #004466;
    padding: 12px 16px;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid #d0e0f0;
  }

  .client-table td {
    padding: 10px 16px;
    border-bottom: 1px solid #e0e8f0;
  }

  .client-table tr:last-child td {
    border-bottom: none;
  }

  .client-table tr:hover {
    background: #f8fbff;
  }

  /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
  @media (max-width: 768px) {
    .form-row {
      flex-direction: column;
      align-items: stretch;
    }

    .form-label {
      width: 100%;
      margin-bottom: 4px;
    }

    select.form-control {
      width: 100%;
    }

    .field-with-hint {
      flex-direction: column;
      align-items: flex-start;
    }

    .hint {
      white-space: normal;
    }

    .button-group {
      flex-direction: column;
    }

    .btn {
      width: 100%;
      justify-content: center;
    }

    .client-table {
      font-size: 13px;
    }

    .client-table th,
    .client-table td {
      padding: 8px 10px;
    }
  }

  /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
  .notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #d4edda;
    color: #155724;
    padding: 12px 24px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 500;
    animation: slideIn 0.3s ease;
  }

  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
</style>

<script>
(function() {
  // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
  const saveBtn = document.getElementById('saveBtn');
  const saveApplyBtn = document.getElementById('saveApplyBtn');
  const cancelBtn = document.getElementById('cancelBtn');
  const showClientsBtn = document.getElementById('showClientsBtn');
  const universalRepeater = document.getElementById('universalRepeater');
  const repeaterField = document.querySelector('.repeater-field');
  const modeSelect = document.getElementById('mode');
  const bandSelect = document.getElementById('band');
  const channelSelect = document.getElementById('channel');
  const disableWlan = document.getElementById('disableWlan');

  // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  const showNotification = (message, isError = false) => {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.style.background = isError ? '#f8d7da' : '#d4edda';
    notification.style.color = isError ? '#721c24' : '#155724';
    notification.innerHTML = `
      <span>${isError ? '‚úï' : '‚úì'}</span>
      <span>${message}</span>
    `;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.opacity = '0';
      notification.style.transform = 'translateX(100%)';
      setTimeout(() => {
        if (notification.parentNode) {
          notification.remove();
        }
      }, 300);
    }, 3000);
  };

  // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–æ–ª–µ SSID –¥–ª—è –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—è
  const toggleRepeaterField = () => {
    if (universalRepeater && repeaterField) {
      const isRepeaterMode = universalRepeater.checked;
      repeaterField.style.display = isRepeaterMode ? 'flex' : 'none';
      
      // –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–∂–∏–º "–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—å"
      if (isRepeaterMode && modeSelect) {
        modeSelect.value = '–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—å';
      }
    }
  };

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞
  const updateChannels = () => {
    if (!bandSelect || !channelSelect) return;
    
    const band = bandSelect.value;
    const currentValue = channelSelect.value;
    
    // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–ø—Ü–∏–∏
    channelSelect.innerHTML = '';
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ü–∏—é "–ê–≤—Ç–æ"
    const autoOption = document.createElement('option');
    autoOption.value = '–ê–≤—Ç–æ';
    autoOption.textContent = '–ê–≤—Ç–æ';
    autoOption.selected = currentValue === '–ê–≤—Ç–æ' || !currentValue;
    channelSelect.appendChild(autoOption);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–Ω–∞–ª—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞
    if (band.includes('2.4–ì–ì—Ü')) {
      // –ö–∞–Ω–∞–ª—ã 2.4 –ì–ì—Ü (1-13)
      for (let i = 1; i <= 13; i++) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = i;
        option.selected = currentValue == i;
        channelSelect.appendChild(option);
      }
    } else {
      // –ö–∞–Ω–∞–ª—ã 5 –ì–ì—Ü (36-165)
      const channels = [36, 40, 44, 48, 52, 56, 60, 64, 100, 104, 108, 112, 116, 120, 124, 128, 132, 136, 140, 149, 153, 157, 161, 165];
      channels.forEach(ch => {
        const option = document.createElement('option');
        option.value = ch;
        option.textContent = ch;
        option.selected = currentValue == ch;
        channelSelect.appendChild(option);
      });
    }
  };

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  const saveSettings = (apply = false) => {
    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è
    const settings = {
      disabled: disableWlan?.checked || false,
      band: bandSelect?.value || '2.4–ì–ì—Ü (B+G+N)',
      mode: modeSelect?.value || 'AP (—Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞)',
      networkType: document.getElementById('networkType')?.value || '–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
      ssid: document.getElementById('ssid')?.value || 'XDM RUS-2.4G',
      channelWidth: document.getElementById('channelWidth')?.value || '20MHz',
      channel: channelSelect?.value || '–ê–≤—Ç–æ',
      broadcastSsid: document.getElementById('broadcastSsid')?.value || '–í–∫–ª—é—á–µ–Ω–æ',
      wmm: document.getElementById('wmm')?.value || '–í–∫–ª—é—á–µ–Ω–æ',
      maxClients: document.getElementById('maxClients')?.value || 64,
      dataRate: document.getElementById('dataRate')?.value || '–ê–≤—Ç–æ',
      txLimit: document.getElementById('txLimit')?.value || 0,
      rxLimit: document.getElementById('rxLimit')?.value || 0,
      repeaterMode: universalRepeater?.checked || false,
      extendedSsid: document.getElementById('extendedSsid')?.value || ''
    };

    console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', settings);
    
    const message = apply ? '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã' : '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã';
    showNotification(message);
  };

  // –°–±—Ä–æ—Å –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º
  const resetSettings = () => {
    if (disableWlan) disableWlan.checked = false;
    if (bandSelect) bandSelect.value = '2.4–ì–ì—Ü (B+G+N)';
    if (modeSelect) modeSelect.value = 'AP (—Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞)';
    if (document.getElementById('networkType')) document.getElementById('networkType').value = '–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞';
    if (document.getElementById('ssid')) document.getElementById('ssid').value = 'XDM RUS-2.4G';
    if (document.getElementById('channelWidth')) document.getElementById('channelWidth').value = '20MHz';
    if (channelSelect) channelSelect.value = '–ê–≤—Ç–æ';
    if (document.getElementById('broadcastSsid')) document.getElementById('broadcastSsid').value = '–í–∫–ª—é—á–µ–Ω–æ';
    if (document.getElementById('wmm')) document.getElementById('wmm').value = '–í–∫–ª—é—á–µ–Ω–æ';
    if (document.getElementById('maxClients')) document.getElementById('maxClients').value = 64;
    if (document.getElementById('dataRate')) document.getElementById('dataRate').value = '–ê–≤—Ç–æ';
    if (document.getElementById('txLimit')) document.getElementById('txLimit').value = 0;
    if (document.getElementById('rxLimit')) document.getElementById('rxLimit').value = 0;
    if (universalRepeater) universalRepeater.checked = false;
    if (document.getElementById('extendedSsid')) document.getElementById('extendedSsid').value = '';
    
    toggleRepeaterField();
    updateChannels();
    
    showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –∏—Å—Ö–æ–¥–Ω—ã–º');
  };

  // –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
  const showActiveClients = () => {
    const clients = [
      { mac: '00:11:22:33:44:55', ip: '192.168.1.101', name: 'Laptop-Ivan', rssi: '-42 dBm', signal: 85 },
      { mac: 'aa:bb:cc:dd:ee:ff', ip: '192.168.1.102', name: 'Phone-Android', rssi: '-58 dBm', signal: 72 },
      { mac: '11:22:33:44:55:66', ip: '192.168.1.103', name: 'SmartTV', rssi: '-65 dBm', signal: 65 },
      { mac: '22:33:44:55:66:77', ip: '192.168.1.104', name: 'Tablet-iPad', rssi: '-38 dBm', signal: 92 }
    ];

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ —Å–∏–≥–Ω–∞–ª–∞
    const getSignalColor = (signal) => {
      if (signal >= 80) return '#28a745';
      if (signal >= 60) return '#ffc107';
      return '#dc3545';
    };

    const tableHtml = `
      <div class="client-popup">
        <div style="background:#fff; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.1); padding:20px;">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
            <h3 style="color:#004466; margin:0; font-size:16px;">–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (${clients.length})</h3>
            <button class="btn btn-secondary btn-sm" onclick="this.closest('.client-popup').remove()">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
          <table class="client-table">
            <thead>
              <tr>
                <th>MAC-–∞–¥—Ä–µ—Å</th>
                <th>IP-–∞–¥—Ä–µ—Å</th>
                <th>–ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</th>
                <th>RSSI</th>
                <th>–°–∏–≥–Ω–∞–ª</th>
              </tr>
            </thead>
            <tbody>
              ${clients.map(c => `
                <tr>
                  <td><code style="background:#f0f4f8; padding:2px 6px; border-radius:4px;">${c.mac}</code></td>
                  <td>${c.ip}</td>
                  <td>${c.name}</td>
                  <td>${c.rssi}</td>
                  <td>
                    <div style="display:flex; align-items:center; gap:8px;">
                      <div style="width:60px; height:6px; background:#e0e8f0; border-radius:3px;">
                        <div style="width:${c.signal}%; height:6px; background:${getSignalColor(c.signal)}; border-radius:3px;"></div>
                      </div>
                      <span style="font-size:12px; color:#666;">${c.signal}%</span>
                    </div>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      </div>
    `;

    // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø–æ–ø–∞–ø, –µ—Å–ª–∏ –µ—Å—Ç—å
    const existing = document.querySelector('.client-popup');
    if (existing) existing.remove();

    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø–æ–ø–∞–ø
    document.querySelector('.content-section').insertAdjacentHTML('beforeend', tableHtml);
    
    showNotification('–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω');
  };

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  if (saveBtn) saveBtn.addEventListener('click', () => saveSettings(false));
  if (saveApplyBtn) saveApplyBtn.addEventListener('click', () => saveSettings(true));
  if (cancelBtn) cancelBtn.addEventListener('click', resetSettings);
  if (showClientsBtn) showClientsBtn.addEventListener('click', showActiveClients);
  if (universalRepeater) universalRepeater.addEventListener('change', toggleRepeaterField);
  if (bandSelect) bandSelect.addEventListener('change', updateChannels);

  // –í–∞–ª–∏–¥–∞—Ü–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π
  const maxClients = document.getElementById('maxClients');
  if (maxClients) {
    maxClients.addEventListener('input', function() {
      let value = parseInt(this.value);
      if (isNaN(value) || value < 1) this.value = 1;
      if (value > 64) this.value = 64;
    });
  }

  const txLimit = document.getElementById('txLimit');
  const rxLimit = document.getElementById('rxLimit');
  
  [txLimit, rxLimit].forEach(limit => {
    if (limit) {
      limit.addEventListener('input', function() {
        let value = parseInt(this.value);
        if (isNaN(value) || value < 0) this.value = 0;
        if (value > 1000) this.value = 1000;
      });
    }
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  toggleRepeaterField();
  updateChannels();
})();
</script>